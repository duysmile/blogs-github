# The Twelve-factor App - Concurrency

- Mở rộng quy mô với mô hình process
- Bất kì chương trình máy tính nào khi chạy cũng đều thể hiện bằng một hoặc nhiều process. Những ứng dụng web có nhiều dạng thực thi process khác nhau. Ví dụ, Những process PHP chạy như những process con của Apache, được bắt đầu theo yêu cầu dựa trên lượng request. Những process Java thì ngược lại, với việc được cung cấp một uberprocess lớn dự trữ một lượng lớn tài nguyên hệ thống (CPU và memory) khi khởi chạy, thì việc quản lí concurrency được diễn ra nội bộ thông qua threads. Trong cả 2 trường hợp thì những process đang chạy chỉ là phần rất nhỏ mà developer của ứng dụng có thể nhìn thấy.
- Trong ứng dụng tuân theo 12 nguyên tắc thì các process là những thành phần nền tảng đầu tiên. Chúng sử dụng các tín hiệu mạnh mẽ từ mô hình process của Unix cho các service chạy nền. Bằng việc sử dụng mô hình này thì developer có thể xây dựng kiến trúc ứng dụng của họ để xử lí các workload đa dạng bằng cách gán mỗi loại cho mỗi loại process. Ví dụ HTTP request có thể được xử lí bởi web process, và những long-running background task thì có thể xử lí bởi những worker process.

![https://12factor.net/images/process-types.png](https://12factor.net/images/process-types.png)

- Điều này không loại trừ những process riêng lẻ để xử lí ghép kênh nội bộ (internal multiplexing) của riêng chúng, thông qua các thread bên trong runtime của VM, hoặc là mô hình bất đồng bộ / hướng sự kiện (async/event) trong những công cụ như EventMachine, Twisted, hay là Node.js. Nhưng một VM riêng lẻ chỉ có thể mở rộng quy mô theo chiều dọc (vertical scale), do đó ứng dụng phải có thể chia làm nhiều process chạy trên nhiều máy vật lí khác nhau.
- Mô hình process thực sự có ích khi nghĩ đến việc mở rộng quy mô (scale out). Những đặc tính không chia sẻ (share-nothing), có thể phân chia theo chiều ngang (horizontally partitionable nature) của process tuân theo 12 nguyên tắc làm cho việc thêm nhiều process đồng thời trở nên đơn giản và đáng tin cậy. Mảng các loại process và số lượng process của mỗi loại được gọi là thông tin process.
- Những process của ứng dụng tuân theo 12 nguyên tắc không bao giờ được chạy như một service nền hoặc ghi các file PID. Thay vào đó, nên phụ thuộc vào các trình quản lí process của hệ điều hành (như `systemd`, một trình quản lí process phân tán của một cloud platform, hoặc một công cụ như `Foreman` cho quá trình phát triển) để quản lí những luồng đầu ra (output streams), phản hồi những process bị crash, và xử lí những lệnh restart hoặc shutdown của user khởi tạo.
